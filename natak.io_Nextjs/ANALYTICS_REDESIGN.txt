# NATAK.io MVP Planning Document
# Date: January 20, 2026

================================================================================
PART 1: ANALYTICS PAGE REDESIGN
================================================================================

## Goal
- Switch from Recharts to ShadCN UI Charts
- Focus on User-Centric KPIs (not internal ops metrics)

## Current KPIs (REMOVE/RETHINK)
- Accept Rate â†’ Confusing, internal metric
- Refund Rate â†’ Business metric, not user-facing
- Avg QC Time â†’ Too technical
- Pipeline Velocity â†’ Internal ops, users don't care

## NEW KPIs (User Focused)

### Row 1: Big Number Cards (4 cards)
1. Credits Remaining     â†’ "2,450 CR"
2. Credits Used (Week)   â†’ "550 CR" 
3. Jobs Completed        â†’ "127"
4. Success Rate          â†’ "94.2%"

### Row 2: Main Chart
- Usage Over Time (Area Chart)
- X-axis: Days (last 7 or 30 days toggle)
- Y-axis: Credits spent
- Shows spending trend

### Row 3: Breakdown Charts (2 cards side by side)

Left Card - By Character (Horizontal Bar Chart)
- Shows which LoRAs/Characters used most
- Example:
  - Model_A_V2: 45 jobs
  - Brand_Amb: 32 jobs
  - Vogue_01: 20 jobs

Right Card - By Content Type (Donut Chart)
- Image vs Video split
- Example:
  - Images: 78%
  - Videos: 22%

## Data Sources
- Credits: profiles.credits + credits_ledger table
- Jobs: jobs table (count, status, character_id)
- Success Rate: jobs WHERE status='completed' / total jobs

## Tech Stack
- ShadCN UI Charts (uses Recharts under hood but styled)
- Real data from Supabase (not mock)

## Optional Future Additions
- Top prompts used
- Average generation time
- Cost per job breakdown
- Export to CSV

================================================================================
PART 2: MVP ONBOARDING FLOW
================================================================================

## Philosophy
- NO organization system for MVP (solo users only)
- Minimal friction - get to dashboard FAST
- Delight with design, not complexity
- Plan upgrade happens AFTER they see value

## The Flow (4 Steps)

### Step 1: Signup Page (/signup)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚   [NATAK.io Logo]                       â”‚
â”‚                                         â”‚
â”‚   CREATE YOUR ACCOUNT                   â”‚
â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Email                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Password                        â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Confirm Password                â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚   [  CREATE ACCOUNT  ] (Primary btn)    â”‚
â”‚                                         â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€ OR â”€â”€â”€â”€â”€â”€â”€                    â”‚
â”‚                                         â”‚
â”‚   [  Continue with Google  ]            â”‚
â”‚                                         â”‚
â”‚   Already have an account? Login        â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tech: Supabase Auth (email + Google OAuth)

### Step 2: Email Verification
- Supabase sends verification email automatically
- User clicks link â†’ verified
- Redirect to /onboarding/welcome

### Step 3: Welcome Screen (/onboarding/welcome)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚   ğŸ¬ Welcome to NATAK                   â”‚
â”‚                                         â”‚
â”‚   Your AI content factory is ready.     â”‚
â”‚                                         â”‚
â”‚   What would you like to do first?      â”‚
â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ­ Train my first character     â”‚   â”‚ â†’ /characters
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ“· Upload some assets           â”‚   â”‚ â†’ /assets
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ‘€ Just explore the dashboard   â”‚   â”‚ â†’ /operations
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚   (Skip - take me to dashboard)         â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Purpose: Let user choose their entry point, feels personal

### Step 4: First-Time Dashboard Hints
- Show subtle tooltips/spotlights on key features
- "This is your Operations Center" â†’ "This is where you train characters"
- Use a library like driver.js or custom overlay
- Only show ONCE (store flag in profile.onboarding_complete)

## Database Changes
- profiles.onboarding_complete (boolean, default false)
- profiles.first_login_at (timestamp)

## What We're NOT Doing (for MVP)
- Organization/team creation
- Marketing questionnaire
- Plan selection during signup
- Invite codes
- Phone verification


================================================================================
PART 3: AUTH FLOWS (Login, Reset, Sessions)
================================================================================

## 3.1 Login Flow (/login)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚   [NATAK.io Logo]                       â”‚
â”‚                                         â”‚
â”‚   WELCOME BACK                          â”‚
â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Email                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Password                        â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚   [Forgot password?]                    â”‚
â”‚                                         â”‚
â”‚   [  LOGIN  ] (Primary btn)             â”‚
â”‚                                         â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€ OR â”€â”€â”€â”€â”€â”€â”€                    â”‚
â”‚                                         â”‚
â”‚   [  Continue with Google  ]            â”‚
â”‚                                         â”‚
â”‚   Don't have an account? Sign up        â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

After Login:
- If first login â†’ /onboarding/welcome
- If returning â†’ /operations (or last visited page)

## 3.2 Password Reset Flow

### Step A: Request Reset (/forgot-password)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚   RESET YOUR PASSWORD                   â”‚
â”‚                                         â”‚
â”‚   Enter your email and we'll send       â”‚
â”‚   you a reset link.                     â”‚
â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Email                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚   [  SEND RESET LINK  ]                 â”‚
â”‚                                         â”‚
â”‚   â† Back to login                       â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tech: supabase.auth.resetPasswordForEmail(email)

### Step B: Check Email Screen
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚   âœ‰ï¸ CHECK YOUR EMAIL                   â”‚
â”‚                                         â”‚
â”‚   We sent a reset link to:              â”‚
â”‚   harsh@example.com                     â”‚
â”‚                                         â”‚
â”‚   Didn't receive it?                    â”‚
â”‚   [Resend email]                        â”‚
â”‚                                         â”‚
â”‚   â† Back to login                       â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### Step C: Reset Password (/reset-password)
User clicks link in email â†’ lands here

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚   SET NEW PASSWORD                      â”‚
â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ New Password                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Confirm Password                â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚   [  UPDATE PASSWORD  ]                 â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

After Success:
- Show "Password updated!" toast
- Auto-login and redirect to /operations

Tech: supabase.auth.updateUser({ password: newPassword })

## 3.3 Session Management

- Supabase handles sessions automatically
- Tokens stored in cookies (httpOnly)
- middleware.ts checks auth on protected routes
- Auto-refresh tokens before expiry

## 3.4 Routes Summary

| Route              | Purpose                  | Protected? |
|--------------------|--------------------------|------------|
| /                  | Landing page             | No         |
| /login             | Login form               | No         |
| /signup            | Signup form              | No         |
| /forgot-password   | Request reset            | No         |
| /reset-password    | Set new password         | No (token) |
| /onboarding/*      | First-time flow          | Yes        |
| /operations        | Main dashboard           | Yes        |
| /assets            | Asset DAM                | Yes        |
| /characters        | Character management     | Yes        |
| (all other /app)   | Protected pages          | Yes        |

## Files to Create/Modify

NEW FILES:
- app/(auth)/signup/page.tsx
- app/(auth)/login/page.tsx  
- app/(auth)/forgot-password/page.tsx
- app/(auth)/reset-password/page.tsx
- app/(auth)/onboarding/welcome/page.tsx

MODIFY:
- middleware.ts (route protection logic)
- schema.sql (add onboarding_complete column)

================================================================================
END OF DOCUMENT
================================================================================
